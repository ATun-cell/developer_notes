# 快照读是如何避免幻读的
****
可重复读隔离级是由MVCC（多版本并发控制）实现的，实现的方式是开始事务后，在执行第一个查询语句后，会创建一个read view，后续的查询语句通过这个read view就可以在undo log版本链找到事务开始时的数据，所以事务过程中每次查询的数据都是一样的，即使中途有其它食物插入了新纪录，是查询不出来这条数据的，所以就很好的避免了幻读问题

# 当前读是如何避免幻读的
MySQL除了普通查询是快照读，其它都是当前读
为了解决可重复读隔离级别使用当前读而造成的幻读问题，就引出了间隙锁
![[Pasted image 20250513212546.png]]

# 幻读被完全解决了吗
可重复读隔离级别没有完全解决幻读
避免特殊场景下发生幻读现象，就是尽量在开启事务之后，马上执行select ''' for update这类当前读的语句，因为它会对记录加next-key lock，从而避免其它食物插入一条新纪录