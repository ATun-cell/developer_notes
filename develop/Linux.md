# Linux 文件系统
## 文件简介
****
- linux重要底层概念：一切都是文件
- 目的是提供一套文件操作接口，从而操作不同类型的资源
## inode
- **inode** 是文件系统的“户口本”，记录文件的属性与数据位置(也就是维护文件实际所在的块的核心信息)。使用`stat`命令查看inode信息
- **扇区**是最小储存单位,块由多个扇区组成
- **block** 是文件内容的“存储柜”，按需分配且独占使用。
- **核心价值**：通过分离元信息与数据，实现高效的文件管理和快速访问。
## 硬链接和软连接（link）
****
***文件链接是一种特殊的文件类型***
- **硬链接**和源文件的inode号相同，可看作互为硬链接源头是同一份文件。`ln`命令用于创建硬链接
- **硬链接**无法对不**存在**的文件创建，也不能跨越**文件系统**
- 每个文件系统inode表独立且只维护改系统内的inode，在不同文件系统中**创建硬链接**会导致inode节点号冲突
- **软连接**类似windows系统的快捷方式，使用`ln -s`创建软链接
- **软连接**可对**不存在**的文件创建也可以跨越**文件系统**
## Linux文件类型
****
*通过命令如`ls`、`file`等查看文件类型信息*

## Linux目录树
****
*Linux使用目录树的层次结构来组织文件和目录*
![[Pasted image 20250426155457.png]]

![[Pasted image 20250426155600.png]]

## Linux常用命令
****
*[命令快查网站]([https://wangchujiang.com/linux-command/](https://wangchujiang.com/linux-command/))* *[命令解释网站]([shell.how](https://www.shell.how/))*

### 目录切换
- `cd usr`
- `cd ..`
- `cd /`切换到系统根目录
- `cd ~`切换到用户主目录
- `cd -`切换到上一操作所在目录
### 目录操作
- `ls`显示目录中文件和子目录的列表
- `ll`是`ls -l`别名 查看该目录下所有目录和文件详细信息
- `mkdir [选项] 目录名` 
- `find [路径] [表达式]`
- `pwd`显示当前工作目录
- `rmdir [选项] 目录命`删除空目录
- `rm [选项] 文件或目录命`删除文件/目录
- `cp [选项] 源文件 目标文件`
- `mv [选项] 源文件 目标文件`
*`mv cp rm`对文件和目录都适用*
### 文件操作
- `touch [选项] 文件名..`创建新文件或更新已存在文件（增）
- `ln [选项] <源文件> <硬链接/软链接文件>`创建硬链接/软链接
- `cat/more/less/tail 文件名`文件的查看（查）
- `vim 文件名`修改文件内容。使用 vim 编辑器主要作用就是修改配置文件，下面是一般步骤：`vim 文件------>进入文件----->命令模式------>按i进入编辑模式----->编辑文件 ------->按Esc进入底行模式----->输入：wq/q!` （输入 wq 代表写入内容并退出，即保存；输入 q!代表强制退出不保存）
### 文件压缩


### 文件传输


### 文件权限
****
 *每个文件由所有者，所在组和其他组的概念。*


![[Pasted image 20250426203540.png]]
- - **所有者(u)**：一般为文件的创建者，谁创建了该文件，就天然的成为该文件的所有者，用 `ls ‐ahl` 命令可以看到文件的所有者 也可以使用 chown 用户名 文件名来修改文件的所有者 。
- **文件所在组(g)**：当某个用户创建了一个文件后，这个文件的所在组就是该用户所在的组用 `ls ‐ahl`命令可以看到文件的所有组也可以使用 chgrp 组名 文件名来修改文件所在的组。
- **其它组(o)**：除开文件的所有者和所在组的用户外，系统的其它用户都是文件的其它组

 **Linux 中权限分为以下几种：**
- r：代表权限是可读，r 也可以用数字 4 表示
- w：代表权限是可写，w 也可以用数字 2 表示
- x：代表权限是可执行，x 也可以用数字 1 表示
**修改文件/目录的权限的命令`chmod`**
- **`chmod u=rwx,g=rw,o=r aaa.txt`** 或者 **`chmod 764 aaa.txt`**

## 用户管理
****
*Linux系统多用户多任务的分时操作系统，任何人进入系统需要账号*
**Linux 用户管理相关命令:**
- `useradd [选项] 用户名`:创建用户账号。使用`useradd`指令所建立的帐号，实际上是保存在 `/etc/passwd`文本文件中。
- `userdel [选项] 用户名`:删除用户帐号。
- `usermod [选项] 用户名`:修改用户账号的属性和配置比如用户名、用户 ID、家目录。
- `passwd [选项] 用户名`: 设置用户的认证信息，包括用户密码、密码过期时间等。。例如：`passwd -S 用户名` ，显示用户账号密码信息。`passwd -d 用户名`: 清除用户密码，会导致用户无法登录。`passwd 用户名`，修改用户密码，随后系统会提示输入新密码并确认密码。
- `su [选项] 用户名`（su 即 Switch User，切换用户）：在当前登录的用户和其他用户之间切换身份。
### [用户组管理](#用户组管理)

每个用户都有一个用户组，系统可以对一个用户组中的所有用户进行集中管理。不同 Linux 系统对用户组的规定有所不同，如 Linux 下的用户属于与它同名的用户组，这个用户组在创建用户时同时创建。

用户组的管理涉及用户组的添加、删除和修改。组的增加、删除和修改实际上就是对`/etc/group`文件的更新。

**Linux 系统用户组的管理相关命令:**

- `groupadd [选项] 用户组` :增加一个新的用户组。
- `groupdel 用户组`:要删除一个已有的用户组。
- `groupmod [选项] 用户组` : 修改用户组的属性

### [网络通信](#网络通信)

- `ping [选项] 目标主机`：测试与目标主机的网络连接。
- `ifconfig` 或 `ip`：用于查看系统的网络接口信息，包括网络接口的 IP 地址、MAC 地址、状态等。
- `netstat [选项]`：用于查看系统的网络连接状态和网络统计信息，可以查看当前的网络连接情况、监听端口、网络协议等。
- `ss [选项]`：比 `netstat` 更好用，提供了更快速、更详细的网络连接信息。
- `nload`：`sar` 和 `nload` 都可以监控网络流量，但`sar` 的输出是文本形式的数据，不够直观。`nload` 则是一个专门用于实时监控网络流量的工具，提供图形化的终端界面，更加直观。不过，`nload` 不保存历史数据，所以它不适合用于长期趋势分析。并且，系统并没有默认安装它，需要手动安装。
- `sudo hostnamectl set-hostname 新主机名`:更改主机名，并且重启后依然有效。`sudo hostname 新主机名`也可以更改主机名。不过需要注意的是，使用 `hostname` 命令直接更改主机名只是临时生效，系统重启后会恢复为原来的主机名
### [其他](#其他)

- `sudo + 其他命令`：以系统管理者的身份执行指令，也就是说，经由 sudo 所执行的指令就好像是 root 亲自执行。
- `grep 要搜索的字符串 要搜索的文件 --color`：搜索命令，--color 代表高亮显示。
- `kill -9 进程的pid`：杀死进程（-9 表示强制终止）先用 ps 查找进程，然后用 kill 杀掉。
- `shutdown`：`shutdown -h now`：指定现在立即关机；`shutdown +5 "System will shutdown after 5 minutes"`：指定 5 分钟后关机，同时送出警告信息给登入用户。
- `reboot`：`reboot`：重开机。`reboot -w`：做个重开机的模拟（只有纪录并不会真的重开机）
## Linux 环境变量
****
### [环境变量分类](#环境变量分类)

按照作用域来分，环境变量可以简单的分成:

- 用户级别环境变量 : `~/.bashrc`、`~/.bash_profile`。
- 系统级别环境变量 : `/etc/bashrc`、`/etc/environment`、`/etc/profile`、`/etc/profile.d`。

上述配置文件执行先后顺序为：`/etc/environment` –> `/etc/profile` –> `/etc/profile.d` –> `~/.bash_profile` –> `/etc/bashrc` –> `~/.bashrc`

如果要修改系统级别环境变量文件，需要管理员具备对该文件的写入权限。

建议用户级别环境变量在 `~/.bash_profile`中配置，系统级别环境变量在 `/etc/profile.d` 中配置。

按照生命周期来分，环境变量可以简单的分成:

- 永久的：需要用户修改相关的配置文件，变量永久生效。
- 临时的：用户利用 `export` 命令，在当前终端下声明环境变量，关闭 shell 终端失效
### [读取环境变量](#读取环境变量)

通过 `export` 命令可以输出当前系统定义的所有环境变量。

```
# 列出当前的环境变量值
export -p
```

除了 `export` 命令之外， `env` 命令也可以列出所有环境变量。

`echo` 命令可以输出指定环境变量的值。

```
# 输出当前的PATH环境变量的值
echo $PATH
# 输出当前的HOME环境变量的值
echo $HOME
```
### [环境变量修改](#环境变量修改)

通过 `export`命令可以修改指定的环境变量。不过，这种方式修改环境变量仅仅对当前 shell 终端生效，关闭 shell 终端就会失效。修改完成之后，立即生效。

```
export CLASSPATH=./JAVA_HOME/lib;$JAVA_HOME/jre/lib
```

通过 `vim` 命令修改环境变量配置文件。这种方式修改环境变量永久有效。

```
vim ~/.bash_profile
```

如果修改的是系统级别环境变量则对所有用户生效，如果修改的是用户级别环境变量则仅对当前用户生效。

修改完成之后，需要 `source` 命令让其生效或者关闭 shell 终端重新登录。

```
source /etc/profile
```
